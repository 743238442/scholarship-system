# 高校奖学金管理系统概要设计文档

## 1. 设计概述

### 1.1 文档目的
本文档旨在为高校奖学金管理系统提供概要设计说明，指导系统的详细设计和开发实施。

### 1.2 设计原则
- **模块化设计**：系统功能按照模块化原则进行设计，便于开发和维护
- **分层架构**：采用经典的分层架构，降低系统耦合度
- **安全性**：确保系统数据安全和访问控制
- **可扩展性**：预留接口，便于功能扩展
- **易用性**：界面简洁友好，操作简便

## 2. 系统架构设计

### 2.1 总体架构
采用经典的四层架构模式：
- **表现层(Presentation Layer)**
- **控制层(Controller Layer)**  
- **服务层(Service Layer)**
- **数据访问层(Data Access Layer)**
- **数据层(Data Layer)**

### 2.2 架构图
```
┌─────────────────────────────────────────────────────────┐
│                     表现层 (UI)                          │
│              Thymeleaf + Bootstrap 5                    │
├─────────────────────────────────────────────────────────┤
│                     控制层 (Controller)                  │
│                  Spring MVC Controller                  │
├─────────────────────────────────────────────────────────┤
│                     服务层 (Service)                     │
│                   业务逻辑处理                          │
├─────────────────────────────────────────────────────────┤
│                   数据访问层 (DAO)                      │
│                    Spring Data JPA                     │
├─────────────────────────────────────────────────────────┤
│                     数据层 (Database)                   │
│                   PostgreSQL                          │
└─────────────────────────────────────────────────────────┘
```

### 2.3 技术架构
- **后端框架**：Spring Boot 3.x
- **前端技术**：Thymeleaf模板引擎 + Bootstrap 5 + jQuery
- **数据库**：PostgreSQL 13+
- **ORM框架**：Spring Data JPA
- **安全框架**：Spring Security
- **构建工具**：Maven
- **开发工具**：Spring Tool Suite (STS)

## 3. 功能模块设计

### 3.1 模块划分
系统按照功能划分为以下主要模块：
- **学生信息管理模块**：StudentModule
- **奖学金评定模块**：ScholarshipModule  
- **公示管理模块**：AnnouncementModule
- **用户管理模块**：UserModule
- **系统管理模块**：SystemModule

### 3.2 模块关系图
```
┌─────────────────────────────────────────────────┐
│                用户管理模块                      │
├─────────────────────────────────────────────────┤
│  学生信息管理  │  奖学金评定  │  公示管理模块     │
│     模块       │     模块     │                  │
├─────────────────────────────────────────────────┤
│              系统管理模块                        │
└─────────────────────────────────────────────────┘
```

### 3.3 各模块详细设计

#### 3.3.1 学生信息管理模块
**主要功能**：
- 学生基本信息管理
- 学生学业信息管理

**核心类设计**：
```
StudentController.java          - 学生信息控制层
├── StudentService.java         - 学生信息服务层
    ├── StudentDao.java         - 学生数据访问层
    └── Student.java            - 学生实体类

AcademicController.java         - 学业信息控制层
├── AcademicService.java        - 学业信息服务层
    ├── AcademicDao.java        - 学业数据访问层
    └── AcademicRecord.java     - 学业记录实体类
```

#### 3.3.2 奖学金评定模块
**主要功能**：
- 奖学金类型管理
- 评定流程管理

**核心类设计**：
```
ScholarshipController.java      - 奖学金控制层
├── ScholarshipService.java     - 奖学金服务层
    ├── ScholarshipDao.java     - 奖学金数据访问层
    ├── ScholarshipType.java    - 奖学金类型实体类
    └── Review.java             - 评审记录实体类
```

#### 3.3.3 公示管理模块
**主要功能**：
- 评定结果公示
- 公示信息查询

**核心类设计**：
```
AnnouncementController.java     - 公示控制层
├── AnnouncementService.java    - 公示服务层
    ├── AnnouncementDao.java    - 公示数据访问层
    └── Announcement.java       - 公示实体类
```
#### 3.3.4 用户管理模块
**主要功能**：
- 用户认证授权
- 权限管理

**核心类设计**：
```
SecurityConfig.java             - 安全配置
├── UserService.java            - 用户服务层
    ├── UserDao.java            - 用户数据访问层
    └── User.java               - 用户实体类
```

#### 3.3.5 权限管理模块
**主要功能**：
- 角色管理
- 权限分配
- 菜单管理

**核心类设计**：
```
RoleService.java                - 角色服务层
├── RoleRepository.java         - 角色数据访问层
└── Role.java                   - 角色实体类

PermissionService.java          - 权限服务层
├── PermissionRepository.java   - 权限数据访问层
└── Permission.java             - 权限实体类
```

## 4. 数据库设计

### 4.1 数据库ER图
```
┌─────────────┐     ┌─────────────────┐     ┌──────────────┐
│    User     │────▶│   Student       │◀────│  Scholarship  │
│   用户      │     │   学生          │     │  奖学金类型   │
├─────────────┤     ├─────────────────┤     ├──────────────┤
│ id          │     │ id              │     │ id           │
│ username    │     │ user_id (FK)    │     │ name         │
│ password    │     │ student_no      │     │ amount       │
│ role        │     │ name            │     │ condition    │
│ email       │     │ gender          │     │ description  │
└─────────────┘     │ college         │     └──────────────┘
                    │ major           │            │
                    │ class           │            │
                    │ contact         │            │
                    └─────────────────┘            │
                              │                    │
                              │              ┌──────────────┐
                              │              │   Review     │
                              │              │   评审记录    │
                              │              ├──────────────┤
                              └──────────────│ id           │
                                             │ student_id   │
                                             │ scholarship_id│
                                             │ reviewer_id  │
                                             │ opinion      │
                                             │ result       │
                                             │ review_date  │
                                             └──────────────┘
                                                      │
                                                      │
                                             ┌──────────────┐
                                             │Announcement │
                                             │   公示      │
                                             ├──────────────┤
                                             │ id           │
                                             │ content      │
                                             │ start_date   │
                                             │ end_date     │
                                             │ status       │
                                             └──────────────┘
```

### 4.2 主要数据表设计

#### 4.2.1 用户表 (user)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 用户ID |
| username | VARCHAR(50) | UNIQUE, NOT NULL | 用户名 |
| password | VARCHAR(255) | NOT NULL | 密码(加密) |
| role | VARCHAR(20) | NOT NULL | 角色(admin/student) |
| email | VARCHAR(100) | | 邮箱 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 更新时间 |

#### 4.2.2 学生表 (student)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 学生ID |
| user_id | BIGINT | FOREIGN KEY | 关联用户ID |
| student_no | VARCHAR(20) | UNIQUE, NOT NULL | 学号 |
| name | VARCHAR(50) | NOT NULL | 姓名 |
| gender | CHAR(1) | | 性别 |
| birth_date | DATE | | 出生日期 |
| college | VARCHAR(100) | | 学院 |
| major | VARCHAR(100) | | 专业 |
| class | VARCHAR(50) | | 班级 |
| contact | VARCHAR(100) | | 联系方式 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |

#### 4.2.3 奖学金类型表 (scholarship_type)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 奖学金ID |
| name | VARCHAR(100) | NOT NULL | 奖学金名称 |
| amount | DECIMAL(10,2) | | 金额 |
| condition | TEXT | | 评定条件 |
| description | TEXT | | 描述 |
| is_active | BOOLEAN | DEFAULT TRUE | 是否启用 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |

#### 4.2.4 评审记录表 (review)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 评审ID |
| student_id | BIGINT | FOREIGN KEY | 学生ID |
| scholarship_id | BIGINT | FOREIGN KEY | 奖学金ID |
| reviewer_id | BIGINT | FOREIGN KEY | 评审人ID |
| opinion | TEXT | | 评审意见 |
| result | VARCHAR(20) | | 评审结果 |
| review_date | TIMESTAMP | | 评审时间 |

#### 4.2.5 公示表 (announcement)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 公示ID |
| title | VARCHAR(200) | NOT NULL | 公示标题 |
| content | TEXT | | 公示内容 |
| start_date | DATE | | 开始日期 |
| end_date | DATE | | 结束日期 |
| status | VARCHAR(20) | DEFAULT 'active' | 状态 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |

#### 4.2.6 学业记录表 (academic_record)
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PRIMARY KEY, AUTO_INCREMENT | 记录ID |
| student_id | BIGINT | FOREIGN KEY | 学生ID |
| semester | VARCHAR(20) | | 学期 |
| course_name | VARCHAR(100) | | 课程名 |
| credit | DECIMAL(3,1) | | 学分 |
| score | DECIMAL(5,2) | | 成绩 |
| gpa | DECIMAL(3,2) | | GPA |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |

## 5. 接口设计

### 5.1 RESTful API设计规范
- **GET**：查询数据
- **POST**：创建数据
- **PUT**：更新数据
- **DELETE**：删除数据

### 5.2 主要API接口

#### 5.2.1 用户管理接口
```
POST /api/auth/login          - 用户登录
POST /api/auth/logout         - 用户登出
GET  /api/user/profile        - 获取用户信息
PUT  /api/user/profile        - 更新用户信息
```

#### 5.2.2 学生信息接口
```
GET  /api/students            - 获取学生列表
GET  /api/students/{id}       - 获取学生详情
POST /api/students            - 创建学生
PUT  /api/students/{id}       - 更新学生信息
GET  /api/students/search     - 搜索学生
```

#### 5.2.3 奖学金接口
```
GET  /api/scholarships        - 获取奖学金列表
POST /api/scholarships        - 创建奖学金类型
PUT  /api/scholarships/{id}   - 更新奖学金信息
POST /api/reviews             - 创建评审记录
GET  /api/reviews             - 获取评审列表
```

#### 5.2.4 公示接口
```
GET  /api/announcements       - 获取公示列表
POST /api/announcements       - 创建公示
PUT  /api/announcements/{id}  - 更新公示
```

## 6. 安全设计

### 6.1 身份认证
- 基于Spring Security的身份认证
- 支持用户名密码登录
- Session管理

### 6.2 权限控制
- 基于角色的访问控制(RBAC)
- **学生角色**：只能查看个人信息和公示
- **管理员角色**：拥有全部权限

### 6.3 数据安全
- 密码加密存储
- SQL注入防护
- XSS攻击防护
- 敏感数据脱敏

### 6.4 接口安全
- CSRF防护
- 接口访问频率限制
- 敏感操作二次确认

## 7. 技术实现要点

### 7.1 开发环境
- JDK 17+
- Maven 3.6+
- PostgreSQL 13+
- Tomcat 9+/Spring Boot内嵌容器

### 7.2 关键配置
- 数据库连接配置
- Spring Security配置
- JPA/Hibernate配置
- 事务管理配置

### 7.3 异常处理
- 全局异常处理
- 自定义异常类
- 友好错误页面

### 7.4 日志记录
- 操作日志记录
- 错误日志记录
- 审计日志

## 8. 性能设计

### 8.1 数据库优化
- 合理建立索引
- 分页查询
- 连接池配置

### 8.2 缓存策略
- 二级缓存配置
- 查询结果缓存

### 8.3 前端优化
- 静态资源压缩
- 浏览器缓存
- Ajax异步加载

## 9. 部署设计

### 9.1 部署架构
- 单体应用部署
- 支持水平扩展
- 负载均衡配置

### 9.2 环境要求
- **开发环境**：本地开发测试
- **测试环境**：功能测试验证
- **生产环境**：正式运行环境

### 9.3 备份策略
- 数据库定期备份
- 配置文件备份
- 日志文件轮转

## 10. 测试设计

### 10.1 测试策略
- 单元测试
- 集成测试
- 系统测试
- 验收测试

### 10.2 测试用例
- 功能测试用例
- 性能测试用例
- 安全测试用例

## 11. 风险与应对

### 11.1 技术风险
- **数据库性能风险**：通过索引优化和查询优化解决
- **并发访问风险**：通过连接池和缓存策略解决

### 11.2 安全风险
- **数据泄露风险**：通过加密和权限控制解决
- **SQL注入风险**：通过参数化查询解决

### 11.3 运维风险
- **系统故障风险**：通过监控和日志记录解决
- **数据丢失风险**：通过备份策略解决