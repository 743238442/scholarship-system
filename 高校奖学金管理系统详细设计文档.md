# 高校奖学金管理系统详细设计文档

## 1. 引言

### 1.1 文档目的
本文档是高校奖学金管理系统的详细设计文档，基于前期的需求分析和概要设计，详细描述系统各模块的具体实现方案，包括类设计、接口设计、数据库设计、页面设计和项目结构等，为开发人员提供明确的开发指南。

### 1.2 术语定义
- **POJO (Plain Old Java Object)**：普通Java对象，不依赖于特定框架的对象
- **DTO (Data Transfer Object)**：数据传输对象，用于不同层之间传输数据
- **VO (Value Object)**：值对象，表示业务领域的不可变数据
- **Mapper**：MyBatis中的数据访问接口，映射SQL操作
- **Controller**：Spring MVC中的控制器，处理HTTP请求
- **Service**：业务逻辑层组件，实现核心业务逻辑
- **Thymeleaf**：服务器端Java模板引擎，用于生成HTML页面

## 2. 项目结构设计

### 2.1 整体目录结构
```plaintext
com.scholarship
├── config/           # 配置类
├── controller/       # 控制器
├── entity/           # 实体类
├── mapper/           # MyBatis映射器
├── service/          # 业务逻辑
│   └── impl/         # 业务逻辑实现
├── dto/              # 数据传输对象
├── vo/               # 视图对象
├── exception/        # 异常处理
├── util/             # 工具类
├── interceptor/      # 拦截器
└── common/           # 公共组件
```

### 2.2 资源目录结构
```plaintext
resources/
├── static/           # 静态资源
│   ├── css/          # 样式文件
│   ├── js/           # JavaScript文件
│   ├── images/       # 图片资源
│   └── lib/          # 第三方库
├── templates/        # Thymeleaf模板
│   ├── common/       # 公共模板
│   ├── auth/         # 认证相关页面
│   ├── student/      # 学生管理页面
│   ├── scholarship/  # 奖学金管理页面
│   ├── announcement/ # 公示管理页面
│   └── system/       # 系统管理页面
├── mapper/           # MyBatis XML映射文件
├── application.yml   # 应用配置文件
└── application-dev.yml # 开发环境配置
```

### 2.3 Maven项目结构
```plaintext
scholarship-management-system/
├── src/
│   ├── main/
│   │   ├── java/com/scholarship/  # Java源代码
│   │   └── resources/             # 资源文件
│   └── test/                      # 测试代码
├── pom.xml                        # Maven配置
└── README.md                      # 项目说明
```

## 3. 详细类设计

### 3.1 系统基础模块

#### 3.1.1 认证与授权相关类

```java
// 用户实体类
@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
    private Long id;
    private String username;
    private String password;
    private String realName;
    private String role;        // 角色（normal:普通用户, admin:管理员用户）
    private String email;
    private String phone;
    private Integer status;
    private Date createTime;
    private Date updateTime;
}

// 用户DTO类
@Data
public class UserDTO {
    private String username;
    private String password;
}

// 登录请求类
@Data
public class LoginRequest {
    private String username;
    private String password;
}

// 登录响应类
@Data
public class LoginResponse {
    private String token;
    private User user;
}

// UserController
@Controller
@RequestMapping("/auth")
public class UserController {
    @Autowired
    private UserService userService;
    
    @PostMapping("/login")
    @ResponseBody
    public Result<LoginResponse> login(@RequestBody LoginRequest request) {
        // 登录逻辑
    }
    
    @PostMapping("/logout")
    @ResponseBody
    public Result<String> logout(HttpSession session) {
        // 登出逻辑
    }
    
    @GetMapping("/info")
    @ResponseBody
    public Result<User> getUserInfo(@SessionAttribute("user") User user) {
        // 获取用户信息逻辑
    }
}

// UserService接口
public interface UserService {
    LoginResponse login(LoginRequest request);
    User findByUsername(String username);
    boolean updatePassword(Long id, String oldPassword, String newPassword);
    boolean updateUserInfo(User user);
}

// UserServiceImpl实现类
@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserMapper userMapper;
    
    @Override
    public LoginResponse login(LoginRequest request) {
        // 实现登录逻辑
    }
    
    @Override
    public User findByUsername(String username) {
        return userMapper.findByUsername(username);
    }
    
    // 其他方法实现...
}

// UserMapper接口
@Mapper
public interface UserMapper extends BaseMapper<User> {
    User findByUsername(String username);
}
```

#### 3.1.2 权限管理简化设计

系统采用简化的权限设计，仅包含两种角色：
- **普通用户(normal)**：拥有个人信息查看、公示结果查看、异议提交等基础权限
- **管理员用户(admin)**：拥有系统所有增删查改权限

权限控制通过在User实体类中的role字段实现，系统在接口层面通过判断用户角色来控制访问权限。

### 3.2 学生信息管理模块

#### 3.2.1 学生信息相关类

```java
// 学生实体类
@Data
public class Student {
    private String studentId;
    private String name;
    private String gender;
    private Date birthday;
    private String college;
    private String major;
    private String className;
    private String email;
    private String phone;
    private String dormitory;
    private String politicalStatus;
    private Date enrollmentDate;
    private Date createTime;
    private Date updateTime;
}

// 学生查询参数类
@Data
public class StudentQuery {
    private String studentId;
    private String name;
    private String college;
    private String major;
    private Integer pageNum;
    private Integer pageSize;
}

// StudentController
@Controller
@RequestMapping("/student")
public class StudentController {
    @Autowired
    private StudentService studentService;
    
    @GetMapping("/list")
    public String list(Model model, StudentQuery query) {
        PageInfo<Student> page = studentService.findPage(query);
        model.addAttribute("page", page);
        model.addAttribute("query", query);
        return "student/list";
    }
    
    @GetMapping("/add")
    public String add() {
        return "student/add";
    }
    
    @PostMapping("/add")
    @ResponseBody
    public Result<String> add(@RequestBody Student student) {
        // 添加学生逻辑
    }
    
    @GetMapping("/edit/{studentId}")
    public String edit(@PathVariable String studentId, Model model) {
        Student student = studentService.findById(studentId);
        model.addAttribute("student", student);
        return "student/edit";
    }
    
    // 其他CRUD方法...
    
    @PostMapping("/import")
    @ResponseBody
    public Result<String> importData(@RequestParam("file") MultipartFile file) {
        // 导入学生数据逻辑
    }
    
    @GetMapping("/export")
    public void export(HttpServletResponse response, StudentQuery query) {
        // 导出学生数据逻辑
    }
}

// StudentService接口
public interface StudentService {
    PageInfo<Student> findPage(StudentQuery query);
    Student findById(String studentId);
    boolean saveStudent(Student student);
    boolean updateStudent(Student student);
    boolean deleteStudent(String studentId);
    int importStudent(MultipartFile file);
    void exportStudent(HttpServletResponse response, StudentQuery query);
}

// StudentServiceImpl实现类
@Service
public class StudentServiceImpl implements StudentService {
    @Autowired
    private StudentMapper studentMapper;
    @Autowired
    private ExcelUtil excelUtil;
    
    @Override
    public PageInfo<Student> findPage(StudentQuery query) {
        PageHelper.startPage(query.getPageNum(), query.getPageSize());
        List<Student> students = studentMapper.findByCondition(query);
        return new PageInfo<>(students);
    }
    
    // 其他方法实现...
}

// StudentMapper接口
@Mapper
public interface StudentMapper extends BaseMapper<Student> {
    List<Student> findByCondition(StudentQuery query);
}
```

#### 3.2.2 学业信息相关类

```java
// 学业信息实体类
@Data
public class AcademicInfo {
    private Long id;
    private String studentId;
    private String courseName;
    private String semester;
    private Double score;
    private Double credit;
    private String courseType;
    private Date createTime;
    private Date updateTime;
}

// 学业信息Service接口
public interface AcademicInfoService {
    List<AcademicInfo> findByStudentId(String studentId);
    List<AcademicInfo> findBySemester(String semester);
    boolean saveAcademicInfo(AcademicInfo academicInfo);
    boolean updateAcademicInfo(AcademicInfo academicInfo);
    boolean deleteAcademicInfo(Long id);
    int importScores(MultipartFile file);
}
```

### 3.3 奖学金评定管理模块

#### 3.3.1 奖学金类型相关类

```java
// 奖学金类型实体类
@Data
public class ScholarshipType {
    private Long id;
    private String name;
    private Double amount;
    private Integer quota;
    private String criteria;
    private String evaluationPeriod;
    private Integer status;
    private Date createTime;
    private Date updateTime;
}

// ScholarshipTypeController
@Controller
@RequestMapping("/scholarship/type")
public class ScholarshipTypeController {
    @Autowired
    private ScholarshipTypeService scholarshipTypeService;
    
    @GetMapping("/list")
    public String list(Model model) {
        List<ScholarshipType> types = scholarshipTypeService.findAll();
        model.addAttribute("types", types);
        return "scholarship/type/list";
    }
    
    // 其他CRUD方法...
}
```

#### 3.3.2 评审简化设计

系统采用简化的奖学金评定流程，移除了申请环节，由管理员直接进行评审。评审信息通过Review实体类进行管理。

// 评审服务接口
public interface ReviewService {
    PageInfo<Review> findPage(ReviewQuery query);
    Review findById(Long id);
    boolean saveReview(Review review);
    boolean updateReview(Review review);
    boolean deleteReview(Long id);
    List<Review> getReviewHistory(String studentId, Long scholarshipTypeId);
}

// 评审服务实现类
@Service
public class ReviewServiceImpl implements ReviewService {
    @Autowired
    private ReviewMapper reviewMapper;
    @Autowired
    private StudentMapper studentMapper;
    @Autowired
    private UserMapper userMapper;
    @Autowired
    private ScholarshipTypeMapper scholarshipTypeMapper;
    
    @Override
    public PageInfo<Review> findPage(ReviewQuery query) {
        PageHelper.startPage(query.getPageNum(), query.getPageSize());
        List<Review> reviews = reviewMapper.findByCondition(query);
        // 填充关联信息
        for (Review review : reviews) {
            fillReviewRelations(review);
        }
        return new PageInfo<>(reviews);
    }
    
    @Override
    public Review findById(Long id) {
        Review review = reviewMapper.selectById(id);
        if (review != null) {
            fillReviewRelations(review);
        }
        return review;
    }
    
    @Override
    public boolean saveReview(Review review) {
        return reviewMapper.insert(review) > 0;
    }
    
    @Override
    public boolean updateReview(Review review) {
        return reviewMapper.updateById(review) > 0;
    }
    
    @Override
    public boolean deleteReview(Long id) {
        return reviewMapper.deleteById(id) > 0;
    }
    
    @Override
    public List<Review> getReviewHistory(String studentId, Long scholarshipTypeId) {
        List<Review> reviews = reviewMapper.findHistory(studentId, scholarshipTypeId);
        for (Review review : reviews) {
            fillReviewRelations(review);
        }
        return reviews;
    }
    
    // 填充评审关联信息
    private void fillReviewRelations(Review review) {
        if (review.getStudentId() != null) {
            review.setStudent(studentMapper.selectById(review.getStudentId()));
        }
        if (review.getReviewerId() != null) {
            review.setReviewer(userMapper.selectById(review.getReviewerId()));
        }
        if (review.getScholarshipTypeId() != null) {
            review.setScholarshipType(scholarshipTypeMapper.selectById(review.getScholarshipTypeId()));
        }
    }
}
```

#### 3.3.3 评审相关类

```java
// 评审实体类
@Data
public class Review {
    private Long id;
    private String studentId;              // 学生ID
    private Long scholarshipTypeId;        // 奖学金类型ID
    private Long reviewerId;               // 评审员ID
    private String reviewComments;         // 评审意见
    private Integer reviewResult;          // 评审结果（1:通过, 0:不通过）
    private Date reviewTime;               // 评审时间
    private Integer reviewLevel;           // 评审层级（可选，表示多级评审）
    
    // 非数据库字段
    @TableField(exist = false)
    private User reviewer;                 // 评审员信息
    @TableField(exist = false)
    private Student student;               // 学生信息
    @TableField(exist = false)
    private ScholarshipType scholarshipType; // 奖学金类型信息
}

// 评审请求类
@Data
public class ReviewRequest {
    private String studentId;
    private Long scholarshipTypeId;
    private String reviewComments;
    private Integer reviewResult;
    private Integer reviewLevel;
}

// 评审查询类
@Data
public class ReviewQuery {
    private String studentId;
    private String studentName;
    private Long scholarshipTypeId;
    private Integer reviewResult;
    private Integer pageNum;
    private Integer pageSize;
}

// ReviewController
@Controller
@RequestMapping("/review")
public class ReviewController {
    @Autowired
    private ReviewService reviewService;
    @Autowired
    private StudentService studentService;
    @Autowired
    private ScholarshipTypeService scholarshipTypeService;
    
    // 评审列表
    @GetMapping("/list")
    public String list(Model model, ReviewQuery query) {
        PageInfo<Review> page = reviewService.findPage(query);
        model.addAttribute("page", page);
        model.addAttribute("query", query);
        model.addAttribute("scholarshipTypes", scholarshipTypeService.findAll());
        return "review/list";
    }
    
    // 添加评审
    @GetMapping("/add")
    public String add(Model model) {
        model.addAttribute("students", studentService.findAll());
        model.addAttribute("scholarshipTypes", scholarshipTypeService.findAll());
        return "review/add";
    }
    
    // 提交评审
    @PostMapping("/submit")
    @ResponseBody
    public Result<String> submit(@RequestBody ReviewRequest request, @SessionAttribute("user") User user) {
        Review review = new Review();
        review.setStudentId(request.getStudentId());
        review.setScholarshipTypeId(request.getScholarshipTypeId());
        review.setReviewerId(user.getId());
        review.setReviewComments(request.getReviewComments());
        review.setReviewResult(request.getReviewResult());
        review.setReviewLevel(request.getReviewLevel());
        review.setReviewTime(new Date());
        
        boolean success = reviewService.saveReview(review);
        return success ? Result.success("评审成功") : Result.error("评审失败");
    }
    
    // 查看评审详情
    @GetMapping("/detail/{id}")
    public String detail(@PathVariable Long id, Model model) {
        Review review = reviewService.findById(id);
        model.addAttribute("review", review);
        return "review/detail";
    }
    
    // 更新评审
    @PostMapping("/update")
    @ResponseBody
    public Result<String> update(@RequestBody Review review) {
        boolean success = reviewService.updateReview(review);
        return success ? Result.success("更新成功") : Result.error("更新失败");
    }
    
    // 删除评审
    @PostMapping("/delete/{id}")
    @ResponseBody
    public Result<String> delete(@PathVariable Long id) {
        boolean success = reviewService.deleteReview(id);
        return success ? Result.success("删除成功") : Result.error("删除失败");
    }
    
    // 获取学生评审历史
    @GetMapping("/history")
    @ResponseBody
    public Result<List<Review>> getHistory(String studentId, Long scholarshipTypeId) {
        List<Review> history = reviewService.getReviewHistory(studentId, scholarshipTypeId);
        return Result.success(history);
    }
}
```

### 3.4 公示管理模块

#### 3.4.1 公示相关类

```java
// 公示实体类
@Data
public class Announcement {
    private Long id;
    private String title;
    private String content;
    private Date startTime;
    private Date endTime;
    private Integer status;
    private Long creatorId;
    private Date createTime;
    private Date updateTime;
    
    // 非数据库字段
    @TableField(exist = false)
    private User creator;
}

// AnnouncementController
@Controller
@RequestMapping("/announcement")
public class AnnouncementController {
    @Autowired
    private AnnouncementService announcementService;
    
    @GetMapping("/list")
    public String list(Model model, Integer status, Integer pageNum, Integer pageSize) {
        // 查询公示列表
    }
    
    @GetMapping("/detail/{id}")
    public String detail(@PathVariable Long id, Model model) {
        Announcement announcement = announcementService.findById(id);
        model.addAttribute("announcement", announcement);
        return "announcement/detail";
    }
    
    @GetMapping("/add")
    public String add() {
        return "announcement/add";
    }
    
    @PostMapping("/add")
    @ResponseBody
    public Result<String> add(@RequestBody Announcement announcement, @SessionAttribute("user") User user) {
        // 添加公示逻辑
    }
    
    // 其他方法...
}

// AnnouncementService接口
public interface AnnouncementService {
    PageInfo<Announcement> findPage(Integer status, Integer pageNum, Integer pageSize);
    Announcement findById(Long id);
    boolean saveAnnouncement(Announcement announcement);
    boolean updateAnnouncement(Announcement announcement);
    boolean deleteAnnouncement(Long id);
    boolean publishAnnouncement(Long id);
}
```

#### 3.4.2 异议相关类

```java
// 异议实体类
@Data
public class Objection {
    private Long id;
    private Long announcementId;
    private String studentId;
    private String content;
    private Date submitTime;
    private Integer status;
    private String handleResult;
    private Long handlerId;
    private Date handleTime;
    
    // 非数据库字段
    @TableField(exist = false)
    private Student student;
    @TableField(exist = false)
    private User handler;
    @TableField(exist = false)
    private Announcement announcement;
}

// ObjectionController
@Controller
@RequestMapping("/objection")
public class ObjectionController {
    @Autowired
    private ObjectionService objectionService;
    
    @PostMapping("/submit")
    @ResponseBody
    public Result<String> submit(@RequestBody Objection objection, @SessionAttribute("user") User user) {
        // 提交异议逻辑
    }
    
    @GetMapping("/list")
    public String list(Model model, Integer status, Integer pageNum, Integer pageSize) {
        // 查询异议列表
    }
    
    @PostMapping("/handle")
    @ResponseBody
    public Result<String> handle(@RequestBody Objection objection, @SessionAttribute("user") User user) {
        // 处理异议逻辑
    }
}
```

## 4. 数据库详细设计

### 4.1 表关系图

```
用户管理相关表
+---------------+
|    sys_user   |
+---------------+
| id            |
| username      |
| password      |
| real_name     |
| role          |  // 简化设计：normal(普通用户), admin(管理员用户)
| email         |
| phone         |
| status        |
| create_time   |
| update_time   |
+---------------+

学生信息相关表
+---------------+     +----------------+     +------------------+
|    student    |     | academic_info  |     |    performance   |
+---------------+     +----------------+     +------------------+
| student_id    |<--->| id             |     | id               |
| name          |     | student_id     |<---+| student_id       |
| gender        |     | course_name    |     | type             |
| birthday      |     | semester       |     | title            |
| college       |     | score          |     | description      |
| major         |     | credit         |     | level            |
| class_name    |     | course_type    |     | date             |
| email         |     | create_time    |     | certificate_num  |
| phone         |     | update_time    |     | create_time      |
| dormitory     |     +----------------+     | update_time      |
| political_sts |                            +------------------+
| enrollment_dt |
| create_time   |
| update_time   |
+---------------+

奖学金相关表
+-------------------+     +----------------+
| scholarship_type  |     |     review     |
+-------------------+     +----------------+
| id                |<--->| id             |
| name              |     | student_id     |
| amount            |     | scholarship_type_id|
| quota             |     | reviewer_id    |
| criteria          |     | review_comments|
| status            |     | review_result  |
| create_time       |     | review_time    |
| update_time       |     | review_level   |
+-------------------+     +----------------+
        ^                     ^
        |                     |
        |                     |
        |                     |
+---------------+             |
|    student    |-------------+
+---------------+
| student_id    |
| name          |
| gender        |
| birthday      |
| college       |
| major         |
| class_name    |
| email         |
| phone         |
| dormitory     |
| political_sts |
| enrollment_dt |
| create_time   |
| update_time   |
+---------------+
| create_time       |     | update_time      |     +----------------+
| update_time       |     +------------------+            ^
+-------------------+              ^                      |
                                   |                      |
                                   |                      |


公示相关表
+------------------+     +----------------+
|  announcement    |     |   objection    |
+------------------+     +----------------+
| id               |<--->| id             |
| title            |     | announcement_id|
| content          |     | student_id     |
| start_time       |     | content        |
| end_time         |     | submit_time    |
| status           |     | status         |
| creator_id       |     | handle_result  |
| create_time      |     | handler_id     |
| update_time      |     | handle_time    |
+------------------+     +----------------+
```

### 4.2 详细索引设计

| 表名 | 索引名 | 索引字段 | 索引类型 | 说明 |
|------|--------|----------|----------|------|
| `sys_user` | `idx_username` | `username` | UNIQUE | 加速用户登录查询 |
| `sys_user` | `idx_status` | `status` | NORMAL | 快速筛选启用/禁用用户 |
| `sys_user` | `idx_role` | `role` | NORMAL | 按角色筛选用户
| `student` | `idx_student_id` | `student_id` | PRIMARY KEY | 主键索引 |
| `student` | `idx_college_major` | `college, major` | NORMAL | 按学院专业查询 |
| `student` | `idx_name` | `name` | NORMAL | 按姓名模糊查询 |
| `academic_info` | `idx_student_semester` | `student_id, semester` | NORMAL | 查询学生特定学期成绩 |
| `performance` | `idx_student_type` | `student_id, type` | NORMAL | 查询学生特定类型表现 |
| `scholarship_type` | `idx_status` | `status` | NORMAL | 查询启用的奖学金类型 |
| `review` | `idx_student_type_level` | `student_id, scholarship_type_id, review_level` | NORMAL | 查询学生奖学金评审记录 |
| `review` | `idx_reviewer` | `reviewer_id` | NORMAL | 查询评审人评审记录 |
| `review` | `idx_result_time` | `review_result, review_time` | NORMAL | 按评审结果和时间查询 |
| `announcement` | `idx_status_time` | `status, start_time` | NORMAL | 查询公示状态和时间 |
| `announcement` | `idx_creator` | `creator_id` | NORMAL | 查询创建人发布的公示 |
| `objection` | `idx_announcement_status` | `announcement_id, status` | NORMAL | 查询公示的异议处理 |
| `objection` | `idx_student` | `student_id` | NORMAL | 查询学生提交的异议 |

### 4.3 SQL语句示例

#### 4.3.1 学生模块SQL

```sql
-- 学生信息查询（带分页）
SELECT * FROM student 
WHERE (student_id LIKE CONCAT('%', #{studentId}, '%') OR #{studentId} IS NULL) 
AND (name LIKE CONCAT('%', #{name}, '%') OR #{name} IS NULL)
AND (college = #{college} OR #{college} IS NULL)
AND (major = #{major} OR #{major} IS NULL)
LIMIT #{offset}, #{limit};

-- 学生成绩查询
SELECT * FROM academic_info 
WHERE student_id = #{studentId} 
AND (semester = #{semester} OR #{semester} IS NULL)
ORDER BY semester DESC;

-- 计算学生GPA
SELECT AVG(score) as avg_score, 
SUM(score * credit) / SUM(credit) as gpa
FROM academic_info 
WHERE student_id = #{studentId};
```

#### 4.3.2 奖学金模块SQL

```sql
-- 评审记录查询
SELECT r.*, u.real_name as reviewer_name, s.name as student_name, t.name as scholarship_name 
FROM review r
LEFT JOIN sys_user u ON r.reviewer_id = u.id
LEFT JOIN student s ON r.student_id = s.student_id
LEFT JOIN scholarship_type t ON r.scholarship_type_id = t.id
WHERE (r.student_id LIKE CONCAT('%', #{studentId}, '%') OR #{studentId} IS NULL)
AND (r.scholarship_type_id = #{scholarshipTypeId} OR #{scholarshipTypeId} IS NULL)
AND (r.review_result = #{reviewResult} OR #{reviewResult} IS NULL)
ORDER BY r.review_time DESC
LIMIT #{offset}, #{limit};

-- 统计各学院奖学金名额使用情况
SELECT s.college, t.name as scholarship_name, 
COUNT(r.id) as reviewed_count, t.quota as total_quota
FROM review r
JOIN student s ON r.student_id = s.student_id
JOIN scholarship_type t ON r.scholarship_type_id = t.id
WHERE r.review_result = 1
GROUP BY s.college, t.id;

-- 学生奖学金获得情况
SELECT s.student_id, s.name, s.college, s.major, 
t.name as scholarship_type, t.amount, r.review_time, r.review_comments
FROM review r
JOIN student s ON r.student_id = s.student_id
JOIN scholarship_type t ON r.scholarship_type_id = t.id
WHERE r.review_result = 1
ORDER BY r.review_time DESC;
```

#### 4.3.3 公示模块SQL

```sql
-- 公示列表查询
SELECT a.*, u.real_name as creator_name 
FROM announcement a
LEFT JOIN sys_user u ON a.creator_id = u.id
WHERE (a.status = #{status} OR #{status} IS NULL)
ORDER BY a.start_time DESC
LIMIT #{offset}, #{limit};

-- 异议列表查询
SELECT o.*, s.name as student_name, u.real_name as handler_name 
FROM objection o
LEFT JOIN student s ON o.student_id = s.student_id
LEFT JOIN sys_user u ON o.handler_id = u.id
WHERE (o.announcement_id = #{announcementId} OR #{announcementId} IS NULL)
AND (o.status = #{status} OR #{status} IS NULL)
ORDER BY o.submit_time DESC;
```

## 5. 页面详细设计

### 5.1 页面结构

#### 5.1.1 通用布局

```html
<!-- templates/common/layout.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title} + ' - 高校奖学金管理系统'">高校奖学金管理系统</title>
    <!-- 引入Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/static/lib/bootstrap/css/bootstrap.min.css}">
    <!-- 引入自定义CSS -->
    <link rel="stylesheet" th:href="@{/static/css/common.css}">
    <!-- 页面特定CSS -->
    <th:block th:fragment="css"></th:block>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" th:href="@{/}">高校奖学金管理系统</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <!-- 导航菜单项 -->

                    </li>
                    <li class="nav-item" th:if="${user.role == '学生'}">
                        <a class="nav-link" th:href="@{/announcement/list}">公示查看</a>
                    </li>
                    <!-- 更多菜单项根据角色动态显示 -->
                </ul>
                <div class="navbar-nav">
                    <span class="nav-item nav-link text-white">欢迎您，[[${user.realName}]]</span>
                    <a class="nav-item nav-link text-white" th:href="@{/auth/logout}">退出</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容区域 -->
    <div class="container mt-4">
        <th:block layout:fragment="content"></th:block>
    </div>

    <!-- 页脚 -->
    <footer class="mt-5 py-3 bg-light text-center">
        <div class="container">
            <p class="mb-0">© 2024 高校奖学金管理系统</p>
        </div>
    </footer>

    <!-- 引入jQuery -->
    <script th:src="@{/static/lib/jquery/jquery-3.7.0.min.js}"></script>
    <!-- 引入Bootstrap JS -->
    <script th:src="@{/static/lib/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <!-- 引入自定义JS -->
    <script th:src="@{/static/js/common.js}"></script>
    <!-- 页面特定JS -->
    <th:block th:fragment="js"></th:block>
</body>
</html>
```

### 5.2 登录页面

#### 5.2.1 页面设计

```html
<!-- templates/auth/login.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - 高校奖学金管理系统</title>
    <link rel="stylesheet" th:href="@{/static/lib/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/auth.css}">
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 mt-5">
                <div class="card">
                    <div class="card-header bg-primary text-white text-center">
                        <h3>用户登录</h3>
                    </div>
                    <div class="card-body">
                        <form id="loginForm" th:action="@{/auth/login}" method="post">
                            <div class="mb-3">
                                <label for="username" class="form-label">用户名</label>
                                <input type="text" class="form-control" id="username" name="username" required>
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">密码</label>
                                <input type="password" class="form-control" id="password" name="password" required>
                            </div>
                            <div th:if="${not #strings.isEmpty(errorMsg)}" class="alert alert-danger">
                                <span th:text="${errorMsg}"></span>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">登录</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{/static/lib/jquery/jquery-3.7.0.min.js}"></script>
    <script th:src="@{/static/js/auth/login.js}"></script>
</body>
</html>
```

#### 5.2.2 JavaScript实现

```javascript
// static/js/auth/login.js
$(document).ready(function() {
    $('#loginForm').submit(function(e) {
        e.preventDefault();
        
        const username = $('#username').val();
        const password = $('#password').val();
        
        if (!username || !password) {
            alert('请输入用户名和密码');
            return;
        }
        
        $.ajax({
            url: '/auth/login',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ username: username, password: password }),
            success: function(res) {
                if (res.code === 200) {
                    window.location.href = '/';
                } else {
                    alert(res.message || '登录失败');
                }
            },
            error: function() {
                alert('服务器错误，请稍后重试');
            }
        });
    });
});
```

### 5.3 学生管理页面

#### 5.3.1 学生列表页面

```html
<!-- templates/student/list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{common/layout}">
<head>
    <title>学生列表</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="card">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <h4 class="mb-0">学生管理</h4>
                <div>
                    <a th:href="@{/student/add}" class="btn btn-light btn-sm">添加学生</a>
                    <button id="importBtn" class="btn btn-light btn-sm ms-2">导入数据</button>
                    <a th:href="@{/student/export}" class="btn btn-light btn-sm ms-2">导出数据</a>
                </div>
            </div>
            <div class="card-body">
                <!-- 搜索表单 -->
                <form id="searchForm" class="mb-4">
                    <div class="row">
                        <div class="col-md-3">
                            <input type="text" class="form-control" name="studentId" placeholder="学号" th:value="${query?.studentId}">
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" name="name" placeholder="姓名" th:value="${query?.name}">
                        </div>
                        <div class="col-md-3">
                            <select class="form-control" name="college">
                                <option value="">所有学院</option>
                                <!-- 动态生成学院选项 -->
                            </select>
                        </div>
                        <div class="col-md-3">
                            <button type="submit" class="btn btn-primary">搜索</button>
                            <button type="reset" class="btn btn-secondary ms-2">重置</button>
                        </div>
                    </div>
                </form>
                
                <!-- 学生列表表格 -->
                <table class="table table-bordered table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>学号</th>
                            <th>姓名</th>
                            <th>性别</th>
                            <th>学院</th>
                            <th>专业</th>
                            <th>班级</th>
                            <th>联系电话</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="student : ${page.list}">
                            <td th:text="${student.studentId}"></td>
                            <td th:text="${student.name}"></td>
                            <td th:text="${student.gender}"></td>
                            <td th:text="${student.college}"></td>
                            <td th:text="${student.major}"></td>
                            <td th:text="${student.className}"></td>
                            <td th:text="${student.phone}"></td>
                            <td>
                                <a th:href="@{/student/edit/{studentId}(studentId=${student.studentId})}" class="btn btn-sm btn-info">编辑</a>
                                <button class="btn btn-sm btn-danger delete-btn" th:data-id="${student.studentId}">删除</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- 分页 -->
                <div class="pagination-container">
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <!-- 分页按钮 -->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 导入文件模态框 -->
    <div class="modal fade" id="importModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">导入学生数据</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="importForm" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="file" class="form-label">选择Excel文件</label>
                            <input type="file" class="form-control" id="file" name="file" accept=".xlsx,.xls">
                            <small class="form-text text-muted">请使用系统提供的模板文件</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" id="confirmImportBtn" class="btn btn-primary">导入</button>
                </div>
            </div>
        </div>
    </div>
    
    <th:block layout:fragment="js">
        <script th:src="@{/static/js/student/list.js}"></script>
    </th:block>
</body>
</html>
```

#### 5.3.2 学生列表页面JavaScript

```javascript
// static/js/student/list.js
$(document).ready(function() {
    // 删除学生
    $('.delete-btn').click(function() {
        const studentId = $(this).data('id');
        if (confirm(`确定要删除学号为${studentId}的学生吗？`)) {
            $.ajax({
                url: `/student/delete/${studentId}`,
                type: 'DELETE',
                success: function(res) {
                    if (res.code === 200) {
                        alert('删除成功');
                        location.reload();
                    } else {
                        alert(res.message || '删除失败');
                    }
                },
                error: function() {
                    alert('服务器错误');
                }
            });
        }
    });
    
    // 导入按钮点击事件
    $('#importBtn').click(function() {
        $('#importModal').modal('show');
    });
    
    // 确认导入
    $('#confirmImportBtn').click(function() {
        const formData = new FormData($('#importForm')[0]);
        
        $.ajax({
            url: '/student/import',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function(res) {
                if (res.code === 200) {
                    alert(`导入成功，共导入${res.data}条记录`);
                    $('#importModal').modal('hide');
                    location.reload();
                } else {
                    alert(res.message || '导入失败');
                }
            },
            error: function() {
                alert('服务器错误');
            }
        });
    });
});
```

### 5.4 奖学金申请页面

#### 5.4.1 学生申请页面

```html
<!-- templates/application/apply.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{common/layout}">
<head>
    <title>奖学金申请</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">奖学金申请</h4>
            </div>
            <div class="card-body">
                <form id="applyForm">
                    <div class="mb-3">
                        <label for="scholarshipTypeId" class="form-label">选择奖学金类型 <span class="text-danger">*</span></label>
                        <select id="scholarshipTypeId" name="scholarshipTypeId" class="form-control" required>
                            <option value="">请选择奖学金类型</option>
                            <option th:each="type : ${types}" th:value="${type.id}" th:text="${type.name + ' - ' + type.amount + '元'}"></option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="reason" class="form-label">申请理由 <span class="text-danger">*</span></label>
                        <textarea id="reason" name="reason" class="form-control" rows="5" required placeholder="请详细描述申请理由，包括学习成绩、综合素质等方面"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="attachment" class="form-label">附件上传（可选）</label>
                        <input type="file" id="attachment" name="attachment" class="form-control">
                        <small class="form-text text-muted">请上传证明材料，支持PDF、Word、Excel格式，文件大小不超过10MB</small>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary">提交申请</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- 申请历史 -->
        <div class="card mt-4">
            <div class="card-header bg-secondary text-white">
                <h4 class="mb-0">申请历史</h4>
            </div>
            <div class="card-body">
                <table class="table table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>奖学金名称</th>
                            <th>申请时间</th>
                            <th>申请状态</th>
                            <th>申请理由</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="app : ${applications}">
                            <td th:text="${app.scholarshipType?.name}"></td>
                            <td th:text="${#dates.format(app.applyTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                            <td>
                                <span th:switch="${app.status}">
                                    <span th:case="0" class="badge bg-warning">待审核</span>
                                    <span th:case="1" class="badge bg-info">初审通过</span>
                                    <span th:case="2" class="badge bg-primary">学院通过</span>
                                    <span th:case="3" class="badge bg-success">学校通过</span>
                                    <span th:case="4" class="badge bg-danger">已拒绝</span>
                                </span>
                            </td>
                            <td th:text="${app.reason}"></td>
                            <td>
                                <a th:href="@{/application/detail/{id}(id=${app.id})}" class="btn btn-sm btn-info">查看详情</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <th:block layout:fragment="js">
        <script th:src="@{/static/js/application/apply.js}"></script>
    </th:block>
</body>
</html>
```

#### 5.4.2 申请页面JavaScript

```javascript
// static/js/application/apply.js
$(document).ready(function() {
    $('#applyForm').submit(function(e) {
        e.preventDefault();
        
        const scholarshipTypeId = $('#scholarshipTypeId').val();
        const reason = $('#reason').val();
        
        if (!scholarshipTypeId || !reason) {
            alert('请填写必填项');
            return;
        }
        
        // 提交申请
        const formData = new FormData();
        formData.append('scholarshipTypeId', scholarshipTypeId);
        formData.append('reason', reason);
        
        const file = $('#attachment')[0].files[0];
        if (file) {
            formData.append('attachment', file);
        }
        
        $.ajax({
            url: '/application/submit',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function(res) {
                if (res.code === 200) {
                    alert('申请提交成功');
                    location.reload();
                } else {
                    alert(res.message || '申请提交失败');
                }
            },
            error: function() {
                alert('服务器错误');
            }
        });
    });
});
```

## 6. 接口详细设计

### 6.1 接口列表

#### 6.1.1 用户认证接口

| 接口路径 | 方法 | 模块/文件 | 类型 | 功能描述 | 请求体 (JSON) | 成功响应 (200 OK) |
|---------|-----|----------|------|---------|--------------|------------------|
| `/auth/login` | `POST` | `controller/auth/UserController.java` | `Controller` | 用户登录 | `{"username": "...", "password": "..."}` | `{"code": 200, "message": "登录成功", "data": {"token": "...", "user": {...}}}` |
| `/auth/logout` | `POST` | `controller/auth/UserController.java` | `Controller` | 用户登出 | N/A | `{"code": 200, "message": "登出成功"}` |
| `/auth/info` | `GET` | `controller/auth/UserController.java` | `Controller` | 获取用户信息 | N/A | `{"code": 200, "data": {"id": 1, "username": "...", "realName": "...", "role": "..."}}` |

#### 6.1.2 学生管理接口

| 接口路径 | 方法 | 模块/文件 | 类型 | 功能描述 | 请求参数/请求体 | 成功响应 (200 OK) |
|---------|-----|----------|------|---------|--------------|------------------|
| `/student/list` | `GET` | `controller/student/StudentController.java` | `Controller` | 获取学生列表 | Query: `studentId, name, college, major, pageNum, pageSize` | Thymeleaf模板页面 |
| `/student/add` | `GET` | `controller/student/StudentController.java` | `Controller` | 获取添加学生页面 | N/A | Thymeleaf模板页面 |
| `/student/add` | `POST` | `controller/student/StudentController.java` | `Controller` | 添加学生 | JSON: 学生信息对象 | `{"code": 200, "message": "添加成功"}` |
| `/student/edit/{studentId}` | `GET` | `controller/student/StudentController.java` | `Controller` | 获取编辑学生页面 | Path: `studentId` | Thymeleaf模板页面 |
| `/student/edit` | `PUT` | `controller/student/StudentController.java` | `Controller` | 编辑学生 | JSON: 学生信息对象 | `{"code": 200, "message": "更新成功"}` |
| `/student/delete/{studentId}` | `DELETE` | `controller/student/StudentController.java` | `Controller` | 删除学生 | Path: `studentId` | `{"code": 200, "message": "删除成功"}` |
| `/student/import` | `POST` | `controller/student/StudentController.java` | `Controller` | 导入学生数据 | FormData: 文件 | `{"code": 200, "message": "导入成功", "data": 导入数量}` |
| `/student/export` | `GET` | `controller/student/StudentController.java` | `Controller` | 导出学生数据 | Query: 查询条件 | Excel文件下载 |

#### 6.1.3 奖学金管理接口

| 接口路径 | 方法 | 模块/文件 | 类型 | 功能描述 | 请求参数/请求体 | 成功响应 (200 OK) |
|---------|-----|----------|------|---------|--------------|------------------|
| `/scholarship/type/list` | `GET` | `controller/scholarship/ScholarshipTypeController.java` | `Controller` | 获取奖学金类型列表 | N/A | Thymeleaf模板页面 |
| `/scholarship/type/add` | `GET` | `controller/scholarship/ScholarshipTypeController.java` | `Controller` | 获取添加奖学金类型页面 | N/A | Thymeleaf模板页面 |
| `/scholarship/type/add` | `POST` | `controller/scholarship/ScholarshipTypeController.java` | `Controller` | 添加奖学金类型 | JSON: 类型信息 | `{"code": 200, "message": "添加成功"}` |
| `/review/list` | `GET` | `controller/review/ReviewController.java` | `Controller` | 获取评审列表 | Query: `studentId, scholarshipTypeId, reviewResult, pageNum, pageSize` | Thymeleaf模板页面 |
| `/review/add` | `GET` | `controller/review/ReviewController.java` | `Controller` | 获取添加评审页面 | N/A | Thymeleaf模板页面 |
| `/review/add` | `POST` | `controller/review/ReviewController.java` | `Controller` | 添加评审记录 | JSON: 评审信息 | `{"code": 200, "message": "添加成功"}` |
| `/review/edit/{id}` | `GET` | `controller/review/ReviewController.java` | `Controller` | 获取编辑评审页面 | Path: `id` | Thymeleaf模板页面 |
| `/review/edit` | `PUT` | `controller/review/ReviewController.java` | `Controller` | 编辑评审记录 | JSON: 评审信息 | `{"code": 200, "message": "更新成功"}` |

#### 6.1.4 公示管理接口

| 接口路径 | 方法 | 模块/文件 | 类型 | 功能描述 | 请求参数/请求体 | 成功响应 (200 OK) |
|---------|-----|----------|------|---------|--------------|------------------|
| `/announcement/list` | `GET` | `controller/announcement/AnnouncementController.java` | `Controller` | 获取公示列表 | Query: `status, pageNum, pageSize` | Thymeleaf模板页面 |
| `/announcement/detail/{id}` | `GET` | `controller/announcement/AnnouncementController.java` | `Controller` | 获取公示详情 | Path: `id` | Thymeleaf模板页面 |
| `/announcement/add` | `GET` | `controller/announcement/AnnouncementController.java` | `Controller` | 获取添加公示页面 | N/A | Thymeleaf模板页面 |
| `/announcement/add` | `POST` | `controller/announcement/AnnouncementController.java` | `Controller` | 添加公示 | JSON: 公示信息 | `{"code": 200, "message": "添加成功"}` |
| `/announcement/publish/{id}` | `POST` | `controller/announcement/AnnouncementController.java` | `Controller` | 发布公示 | Path: `id` | `{"code": 200, "message": "发布成功"}` |
| `/objection/submit` | `POST` | `controller/announcement/ObjectionController.java` | `Controller` | 提交异议 | JSON: 异议信息 | `{"code": 200, "message": "提交成功"}` |
| `/objection/list` | `GET` | `controller/announcement/ObjectionController.java` | `Controller` | 获取异议列表 | Query: `announcementId, status, pageNum, pageSize` | Thymeleaf模板页面 |
| `/objection/handle` | `POST` | `controller/announcement/ObjectionController.java` | `Controller` | 处理异议 | JSON: 处理信息 | `{"code": 200, "message": "处理成功"}` |

### 6.2 接口实现示例

#### 6.2.1 用户登录接口实现

```java
// controller/auth/UserController.java
@Controller
@RequestMapping("/auth")
public class UserController {
    private static final Logger logger = LoggerFactory.getLogger(UserController.class);
    
    @Autowired
    private UserService userService;
    
    @GetMapping("/login")
    public String loginPage(Model model, @RequestParam(required = false) String errorMsg) {
        if (StringUtils.hasText(errorMsg)) {
            model.addAttribute("errorMsg", errorMsg);
        }
        return "auth/login";
    }
    
    @PostMapping("/login")
    @ResponseBody
    public Result<LoginResponse> login(@RequestBody LoginRequest request, HttpSession session) {
        try {
            logger.info("用户登录: {}", request.getUsername());
            LoginResponse response = userService.login(request);
            session.setAttribute("user", response.getUser());
            return Result.success(response, "登录成功");
        } catch (Exception e) {
            logger.error("登录失败: {}", e.getMessage());
            return Result.error(e.getMessage());
        }
    }
    
    @PostMapping("/logout")
    @ResponseBody
    public Result<String> logout(HttpSession session) {
        session.invalidate();
        return Result.success("登出成功");
    }
    
    @GetMapping("/info")
    @ResponseBody
    public Result<User> getUserInfo(@SessionAttribute("user") User user) {
        return Result.success(user);
    }
}

// service/impl/UserServiceImpl.java
@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserMapper userMapper;
    
    @Override
    public LoginResponse login(LoginRequest request) {
        User user = userMapper.findByUsername(request.getUsername());
        if (user == null) {
            throw new BusinessException("用户不存在");
        }
        
        // 校验密码
        if (!PasswordEncoderUtils.matches(request.getPassword(), user.getPassword())) {
            throw new BusinessException("密码错误");
        }
        
        // 校验用户状态
        if (user.getStatus() != 1) {
            throw new BusinessException("用户已被禁用");
        }
        
        // 生成token (这里简化处理，实际可以使用JWT)
        String token = UUID.randomUUID().toString();
        
        LoginResponse response = new LoginResponse();
        response.setToken(token);
        response.setUser(user);
        
        return response;
    }
    
    @Override
    public User findByUsername(String username) {
        return userMapper.findByUsername(username);
    }
    
    // 其他方法实现...
}
```

#### 6.2.2 学生管理接口实现

```java
// controller/student/StudentController.java
@Controller
@RequestMapping("/student")
public class StudentController {
    @Autowired
    private StudentService studentService;
    
    @GetMapping("/list")
    public String list(Model model, StudentQuery query) {
        if (query.getPageNum() == null) {
            query.setPageNum(1);
        }
        if (query.getPageSize() == null) {
            query.setPageSize(10);
        }
        
        PageInfo<Student> page = studentService.findPage(query);
        model.addAttribute("page", page);
        model.addAttribute("query", query);
        return "student/list";
    }
    
    @GetMapping("/add")
    public String add() {
        return "student/add";
    }
    
    @PostMapping("/add")
    @ResponseBody
    public Result<String> add(@RequestBody Student student) {
        try {
            boolean success = studentService.saveStudent(student);
            if (success) {
                return Result.success("添加成功");
            } else {
                return Result.error("添加失败");
            }
        } catch (Exception e) {
        return Result.error(e.getMessage());
    }
}

#### 6.2.3 评审管理接口实现

```java
// controller/review/ReviewController.java
@Controller
@RequestMapping("/review")
public class ReviewController {
    @Autowired
    private ReviewService reviewService;
    @Autowired
    private StudentService studentService;
    @Autowired
    private ScholarshipTypeService scholarshipTypeService;
    
    @GetMapping("/list")
    public String list(Model model, ReviewQuery query) {
        if (query.getPageNum() == null) {
            query.setPageNum(1);
        }
        if (query.getPageSize() == null) {
            query.setPageSize(10);
        }
        
        PageInfo<Review> page = reviewService.findPage(query);
        model.addAttribute("page", page);
        model.addAttribute("query", query);
        return "review/list";
    }
    
    @GetMapping("/add")
    public String add(Model model) {
        List<Student> students = studentService.findAll();
        List<ScholarshipType> scholarshipTypes = scholarshipTypeService.findAllEnabled();
        model.addAttribute("students", students);
        model.addAttribute("scholarshipTypes", scholarshipTypes);
        return "review/add";
    }
    
    @PostMapping("/add")
    @ResponseBody
    public Result<String> add(@RequestBody Review review, @SessionAttribute("user") User user) {
        try {
            review.setReviewerId(user.getId());
            review.setReviewTime(new Date());
            boolean success = reviewService.saveReview(review);
            if (success) {
                return Result.success("添加成功");
            } else {
                return Result.error("添加失败");
            }
        } catch (Exception e) {
            return Result.error(e.getMessage());
        }
    }
    
    @GetMapping("/edit/{id}")
    public String edit(@PathVariable Long id, Model model) {
        Review review = reviewService.findById(id);
        List<Student> students = studentService.findAll();
        List<ScholarshipType> scholarshipTypes = scholarshipTypeService.findAllEnabled();
        model.addAttribute("review", review);
        model.addAttribute("students", students);
        model.addAttribute("scholarshipTypes", scholarshipTypes);
        return "review/edit";
    }
    
    @PutMapping("/edit")
    @ResponseBody
    public Result<String> edit(@RequestBody Review review) {
        try {
            boolean success = reviewService.updateReview(review);
            if (success) {
                return Result.success("更新成功");
            } else {
                return Result.error("更新失败");
            }
        } catch (Exception e) {
            return Result.error(e.getMessage());
        }
    }
}
    
    @GetMapping("/edit/{studentId}")
    public String edit(@PathVariable String studentId, Model model) {
        Student student = studentService.findById(studentId);
        model.addAttribute("student", student);
        return "student/edit";
    }
    
    @PutMapping("/edit")
    @ResponseBody
    public Result<String> edit(@RequestBody Student student) {
        try {
            boolean success = studentService.updateStudent(student);
            if (success) {
                return Result.success("更新成功");
            } else {
                return Result.error("更新失败");
            }
        } catch (Exception e) {
            return Result.error(e.getMessage());
        }
    }
    
    @DeleteMapping("/delete/{studentId}")
    @ResponseBody
    public Result<String> delete(@PathVariable String studentId) {
        try {
            boolean success = studentService.deleteStudent(studentId);
            if (success) {
                return Result.success("删除成功");
            } else {
                return Result.error("删除失败");
            }
        } catch (Exception e) {
            return Result.error(e.getMessage());
        }
    }
    
    @PostMapping("/import")
    @ResponseBody
    public Result<Integer> importData(@RequestParam("file") MultipartFile file) {
        try {
            int count = studentService.importStudent(file);
            return Result.success(count, "导入成功");
        } catch (Exception e) {
            return Result.error(e.getMessage());
        }
    }
    
    @GetMapping("/export")
    public void export(HttpServletResponse response, StudentQuery query) {
        try {
            studentService.exportStudent(response, query);
        } catch (Exception e) {
            logger.error("导出失败: {}", e.getMessage());
        }
    }
}
```

## 7. 工具类与通用组件

### 7.1 结果响应类

```java
// common/Result.java
@Data
public class Result<T> {
    private Integer code;    // 响应码，200表示成功
    private String message;  // 响应消息
    private T data;          // 响应数据
    
    public Result() {
    }
    
    public Result(Integer code, String message, T data) {
        this.code = code;
        this.message = message;
        this.data = data;
    }
    
    // 成功响应
    public static <T> Result<T> success(T data, String message) {
        return new Result<>(200, message, data);
    }
    
    public static <T> Result<T> success(T data) {
        return new Result<>(200, "操作成功", data);
    }
    
    public static <T> Result<T> success(String message) {
        return new Result<>(200, message, null);
    }
    
    // 错误响应
    public static <T> Result<T> error(String message) {
        return new Result<>(500, message, null);
    }
    
    public static <T> Result<T> error(Integer code, String message) {
        return new Result<>(code, message, null);
    }
}
```

### 7.2 业务异常类

```java
// exception/BusinessException.java
public class BusinessException extends RuntimeException {
    private String message;
    
    public BusinessException(String message) {
        super(message);
        this.message = message;
    }
    
    @Override
    public String getMessage() {
        return message;
    }
}
```

### 7.3 全局异常处理

```java
// exception/GlobalExceptionHandler.java
@ControllerAdvice
public class GlobalExceptionHandler {
    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    
    // 处理业务异常
    @ExceptionHandler(BusinessException.class)
    @ResponseBody
    public Result<String> handleBusinessException(BusinessException e) {
        logger.error("业务异常: {}", e.getMessage());
        return Result.error(e.getMessage());
    }
    
    // 处理空指针异常
    @ExceptionHandler(NullPointerException.class)
    @ResponseBody
    public Result<String> handleNullPointerException(NullPointerException e) {
        logger.error("空指针异常: {}", e.getMessage());
        return Result.error("系统异常，请联系管理员");
    }
    
    // 处理其他异常
    @ExceptionHandler(Exception.class)
    @ResponseBody
    public Result<String> handleException(Exception e) {
        logger.error("系统异常: {}", e.getMessage(), e);
        return Result.error("系统异常，请联系管理员");
    }
    
    // 处理访问权限异常
    @ExceptionHandler(AccessDeniedException.class)
    public String handleAccessDeniedException(AccessDeniedException e) {
        return "error/403";
    }
    
    // 处理404异常
    @ExceptionHandler(NoHandlerFoundException.class)
    public String handleNoHandlerFoundException(NoHandlerFoundException e) {
        return "error/404";
    }
}
```

### 7.4 密码加密工具

```java
// util/PasswordEncoderUtils.java
public class PasswordEncoderUtils {
    // 密码加密
    public static String encode(String password) {
        BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();
        return encoder.encode(password);
    }
    
    // 密码验证
    public static boolean matches(String rawPassword, String encodedPassword) {
        BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();
        return encoder.matches(rawPassword, encodedPassword);
    }
}
```

### 7.5 Excel工具类

```java
// util/ExcelUtil.java
@Service
public class ExcelUtil {
    // Excel导入
    public <T> List<T> importExcel(MultipartFile file, Class<T> clazz) throws Exception {
        // 使用Apache POI实现Excel导入
        Workbook workbook = null;
        try {
            if (file.getOriginalFilename().endsWith(".xlsx")) {
                workbook = new XSSFWorkbook(file.getInputStream());
            } else if (file.getOriginalFilename().endsWith(".xls")) {
                workbook = new HSSFWorkbook(file.getInputStream());
            } else {
                throw new BusinessException("文件格式不正确，仅支持.xlsx和.xls格式");
            }
            
            // 解析Excel内容并转换为对象列表
            // ...
            
            return resultList;
        } finally {
            if (workbook != null) {
                workbook.close();
            }
        }
    }
    
    // Excel导出
    public <T> void exportExcel(HttpServletResponse response, List<T> dataList, Class<T> clazz, String fileName) throws Exception {
        // 使用Apache POI实现Excel导出
        Workbook workbook = new XSSFWorkbook();
        Sheet sheet = workbook.createSheet(fileName);
        
        // 创建表头
        Row headerRow = sheet.createRow(0);
        // 获取类的字段信息并创建表头单元格
        // ...
        
        // 填充数据
        for (int i = 0; i < dataList.size(); i++) {
            Row dataRow = sheet.createRow(i + 1);
            T data = dataList.get(i);
            // 设置单元格值
            // ...
        }
        
        // 设置响应头
        response.setContentType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
        response.setHeader("Content-Disposition", "attachment; filename=" + URLEncoder.encode(fileName + ".xlsx", "UTF-8"));
        
        // 输出Excel文件
        OutputStream outputStream = response.getOutputStream();
        workbook.write(outputStream);
        outputStream.flush();
        outputStream.close();
        workbook.close();
    }
}
```

### 7.6 日期工具类

```java
// util/DateUtils.java
public class DateUtils {
    // 日期格式常量
    public static final String DATE_FORMAT = "yyyy-MM-dd";
    public static final String DATETIME_FORMAT = "yyyy-MM-dd HH:mm:ss";
    public static final String TIME_FORMAT = "HH:mm:ss";
    
    // 格式化日期为字符串
    public static String format(Date date, String format) {
        if (date == null) {
            return null;
        }
        SimpleDateFormat sdf = new SimpleDateFormat(format);
        return sdf.format(date);
    }
    
    // 解析字符串为日期
    public static Date parse(String dateStr, String format) {
        if (StringUtils.isEmpty(dateStr)) {
            return null;
        }
        try {
            SimpleDateFormat sdf = new SimpleDateFormat(format);
            return sdf.parse(dateStr);
        } catch (ParseException e) {
            throw new RuntimeException("日期解析错误", e);
        }
    }
    
    // 获取当前日期时间
    public static Date now() {
        return new Date();
    }
    
    // 计算日期差
    public static long daysBetween(Date startDate, Date endDate) {
        long diff = endDate.getTime() - startDate.getTime();
        return diff / (24 * 60 * 60 * 1000);
    }
    
    // 日期加减
    public static Date addDays(Date date, int days) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        calendar.add(Calendar.DAY_OF_MONTH, days);
        return calendar.getTime();
    }
}
```

### 7.7 文件上传工具类

```java
// util/FileUploadUtils.java
public class FileUploadUtils {
    // 上传文件
    public static String uploadFile(MultipartFile file, String uploadDir) throws Exception {
        if (file == null || file.isEmpty()) {
            throw new BusinessException("请选择要上传的文件");
        }
        
        // 检查文件大小
        if (file.getSize() > 10 * 1024 * 1024) { // 10MB
            throw new BusinessException("文件大小不能超过10MB");
        }
        
        // 获取文件扩展名
        String originalFilename = file.getOriginalFilename();
        String extension = originalFilename.substring(originalFilename.lastIndexOf("."));
        
        // 生成唯一文件名
        String fileName = UUID.randomUUID().toString() + extension;
        
        // 确保上传目录存在
        File dir = new File(uploadDir);
        if (!dir.exists()) {
            dir.mkdirs();
        }
        
        // 保存文件
        File dest = new File(uploadDir + File.separator + fileName);
        file.transferTo(dest);
        
        return fileName;
    }
    
    // 删除文件
    public static boolean deleteFile(String filePath) {
        File file = new File(filePath);
        if (file.exists() && file.isFile()) {
            return file.delete();
        }
        return false;
    }
}
```

## 8. 项目文件目录结构

### 8.1 完整的项目目录结构

```plaintext
scholarship-management-system/         # 项目根目录
├── src/                              # 源代码目录
│   ├── main/                         # 主要代码
│   │   ├── java/com/scholarship/     # Java源代码
│   │   │   ├── config/               # 配置类
│   │   │   │   ├── WebConfig.java    # Web配置
│   │   │   │   ├── SecurityConfig.java # 安全配置
│   │   │   │   ├── MyBatisConfig.java # MyBatis配置
│   │   │   │   └── SwaggerConfig.java # Swagger配置
│   │   │   ├── controller/           # 控制器
│   │   │   │   ├── auth/             # 认证相关控制器
│   │   │   │   │   └── UserController.java # 用户认证控制器
│   │   │   │   ├── student/          # 学生管理控制器
│   │   │   │   │   ├── StudentController.java # 学生信息控制器
│   │   │   │   │   └── AcademicInfoController.java # 学业信息控制器
│   │   │   │   ├── scholarship/      # 奖学金管理控制器
│   │   │   │   │   ├── ScholarshipTypeController.java # 奖学金类型控制器
│   │   │   │   │   └── ApplicationController.java # 申请管理控制器
│   │   │   │   ├── announcement/     # 公示管理控制器
│   │   │   │   │   ├── AnnouncementController.java # 公示控制器
│   │   │   │   │   └── ObjectionController.java # 异议管理控制器
│   │   │   │   └── system/           # 系统管理控制器
│   │   │   │       ├── RoleController.java # 角色管理控制器
│   │   │   │       └── PermissionController.java # 权限管理控制器
│   │   │   ├── entity/               # 实体类
│   │   │   │   ├── User.java         # 用户实体
│   │   │   │   ├── Role.java         # 角色实体
│   │   │   │   ├── Permission.java   # 权限实体
│   │   │   │   ├── Student.java      # 学生实体
│   │   │   │   ├── AcademicInfo.java # 学业信息实体
│   │   │   │   ├── Performance.java  # 表现记录实体
│   │   │   │   ├── ScholarshipType.java # 奖学金类型实体
│   │   │   │   ├── Application.java  # 申请实体
│   │   │   │   ├── Review.java       # 评审实体
│   │   │   │   ├── Distribution.java # 发放记录实体
│   │   │   │   ├── Announcement.java # 公示实体
│   │   │   │   └── Objection.java    # 异议实体
│   │   │   ├── mapper/               # MyBatis映射器
│   │   │   │   ├── UserMapper.java   # 用户映射器
│   │   │   │   ├── RoleMapper.java   # 角色映射器
│   │   │   │   ├── PermissionMapper.java # 权限映射器
│   │   │   │   ├── StudentMapper.java # 学生映射器
│   │   │   │   ├── AcademicInfoMapper.java # 学业信息映射器
│   │   │   │   ├── PerformanceMapper.java # 表现记录映射器
│   │   │   │   ├── ScholarshipTypeMapper.java # 奖学金类型映射器
│   │   │   │   ├── ApplicationMapper.java # 申请映射器
│   │   │   │   ├── ReviewMapper.java # 评审映射器
│   │   │   │   ├── DistributionMapper.java # 发放记录映射器
│   │   │   │   ├── AnnouncementMapper.java # 公示映射器
│   │   │   │   ├── ObjectionMapper.java # 异议映射器
│   │   │   │   └── RolePermissionMapper.java # 角色权限映射器
│   │   │   ├── service/              # 业务逻辑层
│   │   │   │   ├── UserService.java  # 用户服务接口
│   │   │   │   ├── RoleService.java  # 角色服务接口
│   │   │   │   ├── PermissionService.java # 权限服务接口
│   │   │   │   ├── StudentService.java # 学生服务接口
│   │   │   │   ├── AcademicInfoService.java # 学业信息服务接口
│   │   │   │   ├── ScholarshipTypeService.java # 奖学金类型服务接口
│   │   │   │   ├── ApplicationService.java # 申请服务接口
│   │   │   │   ├── AnnouncementService.java # 公示服务接口
│   │   │   │   ├── ObjectionService.java # 异议服务接口
│   │   │   │   └── impl/             # 业务逻辑实现
│   │   │   │       ├── UserServiceImpl.java # 用户服务实现
│   │   │   │       ├── RoleServiceImpl.java # 角色服务实现
│   │   │   │       ├── StudentServiceImpl.java # 学生服务实现
│   │   │   │       ├── ApplicationServiceImpl.java # 申请服务实现
│   │   │   │       └── AnnouncementServiceImpl.java # 公示服务实现
│   │   │   ├── dto/                  # 数据传输对象
│   │   │   │   ├── LoginRequest.java # 登录请求DTO
│   │   │   │   ├── LoginResponse.java # 登录响应DTO
│   │   │   │   ├── StudentQuery.java # 学生查询DTO
│   │   │   │   ├── ApplicationQuery.java # 申请查询DTO
│   │   │   │   └── ReviewRequest.java # 评审请求DTO
│   │   │   ├── vo/                   # 视图对象
│   │   │   │   ├── StudentVO.java    # 学生视图对象
│   │   │   │   ├── ApplicationVO.java # 申请视图对象
│   │   │   │   └── AnnouncementVO.java # 公示视图对象
│   │   │   ├── exception/            # 异常处理
│   │   │   │   ├── BusinessException.java # 业务异常
│   │   │   │   └── GlobalExceptionHandler.java # 全局异常处理器
│   │   │   ├── util/                 # 工具类
│   │   │   │   ├── PasswordEncoderUtils.java # 密码加密工具
│   │   │   │   ├── DateUtils.java    # 日期工具
│   │   │   │   ├── FileUploadUtils.java # 文件上传工具
│   │   │   │   ├── ExcelUtil.java    # Excel工具
│   │   │   │   └── StringUtils.java  # 字符串工具
│   │   │   ├── interceptor/          # 拦截器
│   │   │   │   ├── LoginInterceptor.java # 登录拦截器
│   │   │   │   └── LogInterceptor.java # 日志拦截器
│   │   │   ├── common/               # 公共组件
│   │   │   │   ├── Result.java       # 统一响应结果
│   │   │   │   ├── Constants.java    # 常量定义
│   │   │   │   └── PageResult.java   # 分页结果
│   │   │   └── ScholarshipApplication.java # 应用主类
│   │   └── resources/                # 资源文件
│   │       ├── static/               # 静态资源
│   │       │   ├── css/              # 样式文件
│   │       │   │   ├── common.css    # 公共样式
│   │       │   │   ├── auth.css      # 认证页面样式
│   │       │   │   ├── student.css   # 学生管理样式
│   │       │   │   └── scholarship.css # 奖学金管理样式
│   │       │   ├── js/               # JavaScript文件
│   │       │   │   ├── common.js     # 公共JavaScript
│   │       │   │   ├── auth/         # 认证相关JavaScript
│   │       │   │   │   └── login.js  # 登录页面JavaScript
│   │       │   │   ├── student/      # 学生管理JavaScript
│   │       │   │   │   ├── list.js   # 学生列表JavaScript
│   │       │   │   │   └── form.js   # 表单操作JavaScript
│   │       │   │   ├── application/  # 申请管理JavaScript
│   │       │   │   │   └── apply.js  # 申请页面JavaScript
│   │       │   │   └── announcement/ # 公示管理JavaScript
│   │       │   │       └── detail.js # 公示详情JavaScript
│   │       │   ├── images/           # 图片资源
│   │       │   │   ├── logo.png      # 系统Logo
│   │       │   │   └── user_avatar.png # 用户头像
│   │       │   └── lib/              # 第三方库
│   │       │       ├── bootstrap/    # Bootstrap
│   │       │       ├── jquery/       # jQuery
│   │       │       ├── layer/        # Layer弹窗
│   │       │       └── echarts/      # ECharts图表
│   │       ├── templates/            # Thymeleaf模板
│   │       │   ├── common/           # 公共模板
│   │       │   │   ├── layout.html   # 布局模板
│   │       │   │   └── footer.html   # 页脚模板
│   │       │   ├── auth/             # 认证相关页面
│   │       │   │   └── login.html    # 登录页面
│   │       │   ├── student/          # 学生管理页面
│   │       │   │   ├── list.html     # 学生列表页面
│   │       │   │   ├── add.html      # 添加学生页面
│   │       │   │   └── edit.html     # 编辑学生页面
│   │       │   ├── scholarship/      # 奖学金管理页面
│   │       │   │   ├── type/         # 类型管理页面
│   │       │   │   │   ├── list.html # 类型列表页面
│   │       │   │   │   └── add.html  # 添加类型页面
│   │       │   │   └── application/  # 申请管理页面
│   │       │   │       ├── apply.html # 申请页面
│   │       │   │       ├── list.html # 申请列表页面
│   │       │   │       └── detail.html # 申请详情页面
│   │       │   ├── announcement/     # 公示管理页面
│   │       │   │   ├── list.html     # 公示列表页面
│   │       │   │   ├── add.html      # 添加公示页面
│   │       │   │   └── detail.html   # 公示详情页面
│   │       │   ├── system/           # 系统管理页面
│   │       │   │   ├── user/         # 用户管理页面
│   │       │   │   ├── role/         # 角色管理页面
│   │       │   │   └── log/          # 日志管理页面
│   │       │   └── error/            # 错误页面
│   │       │       ├── 403.html      # 无权限页面
│   │       │       ├── 404.html      # 页面不存在
│   │       │       └── 500.html      # 服务器错误
│   │       ├── mapper/               # MyBatis XML映射文件
│   │       │   ├── UserMapper.xml    # 用户映射XML
│   │       │   ├── StudentMapper.xml # 学生映射XML
│   │       │   ├── ApplicationMapper.xml # 申请映射XML
│   │       │   └── AnnouncementMapper.xml # 公示映射XML
│   │       ├── application.yml       # 应用配置文件
│   │       ├── application-dev.yml   # 开发环境配置
│   │       ├── application-test.yml  # 测试环境配置
│   │       ├── application-prod.yml  # 生产环境配置
│   │       └── logback-spring.xml    # 日志配置文件
│   └── test/                         # 测试代码
│       └── java/com/scholarship/     # Java测试代码
│           ├── controller/           # 控制器测试
│           ├── service/              # 服务层测试
│           └── mapper/               # 映射器测试
├── target/                           # 编译输出目录
├── pom.xml                           # Maven配置文件
├── README.md                         # 项目说明文档
└── .gitignore                        # Git忽略文件
```

### 8.2 配置文件结构

项目采用多环境配置，主要配置文件如下：

#### 8.2.1 application.yml（主配置文件）

```yaml
# 应用基本配置
server:
  port: 8080
  servlet:
    context-path: /scholarship
  tomcat:
    uri-encoding: UTF-8

# 数据源配置
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/scholarship_db?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  # Thymeleaf模板配置
  thymeleaf:
    cache: false
    prefix: classpath:/templates/
    suffix: .html
    encoding: UTF-8
    mode: HTML5
  
  # 静态资源配置
  mvc:
    static-path-pattern: /static/**
  
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 100MB

# MyBatis配置
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.scholarship.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# 日志配置
logging:
  level:
    root: info
    com.scholarship: debug
  file:
    name: logs/scholarship.log

# 自定义配置
scholarship:
  file-upload-path: D:/uploads/
  token-expire-time: 3600
  page-size: 10
```

#### 8.2.2 application-dev.yml（开发环境配置）

```yaml
# 开发环境配置
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/scholarship_db_dev?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai

# 开发环境日志级别
logging:
  level:
    com.scholarship: debug
```

#### 8.2.3 application-prod.yml（生产环境配置）

```yaml
# 生产环境配置
spring:
  datasource:
    url: jdbc:mysql://192.168.1.100:3306/scholarship_db?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai

# 生产环境日志级别
logging:
  level:
    root: info
    com.scholarship: info

# 自定义配置
scholarship:
  file-upload-path: /data/uploads/
```

### 8.3 Maven依赖配置

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.scholarship</groupId>
    <artifactId>scholarship-management-system</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <name>高校奖学金管理系统</name>
    <description>基于Spring Boot的高校奖学金管理系统</description>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.2.0</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <properties>
        <java.version>17</java.version>
        <mybatis.version>3.5.15</mybatis.version>
        <pagehelper.version>1.4.6</pagehelper.version>
        <lombok.version>1.18.30</lombok.version>
        <poi.version>5.2.5</poi.version>
    </properties>

    <dependencies>
        <!-- Spring Boot核心依赖 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>

        <!-- 数据库依赖 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.3.2</version>
        </dependency>
        <dependency>
            <groupId>com.github.pagehelper</groupId>
            <artifactId>pagehelper-spring-boot-starter</artifactId>
            <version>${pagehelper.version}</version>
        </dependency>

        <!-- 工具类 -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>${poi.version}</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.15.1</version>
        </dependency>

        <!-- 安全相关 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.shiro</groupId>
            <artifactId>shiro-spring</artifactId>
            <version>1.12.0</version>
        </dependency>

        <!-- Swagger文档 -->
        <dependency>
            <groupId>io.springfox</groupId>
            <artifactId>springfox-boot-starter</artifactId>
            <version>3.0.0</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <version>${project.parent.version}</version>
                <configuration>
                    <mainClass>com.scholarship.ScholarshipApplication</mainClass>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
        
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </resource>
        </resources>
    </build>
</project>
```

## 9. 部署与集成方案

### 9.1 部署架构

系统采用经典的三层架构部署：

1. **前端层**：静态资源部署在Nginx服务器
2. **应用层**：Spring Boot应用部署在Tomcat服务器
3. **数据层**：MySQL数据库独立部署

### 9.2 部署流程

#### 9.2.1 数据库部署

1. 创建数据库并导入初始数据：
   ```sql
   CREATE DATABASE scholarship_db DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   USE scholarship_db;
   -- 导入初始化SQL脚本
   SOURCE scholarship_init.sql;
   ```

#### 9.2.2 应用部署

1. 编译打包：
   ```bash
   mvn clean package -DskipTests
   ```

2. 部署到Tomcat：
   ```bash
   cp target/scholarship-management-system-1.0.0.jar /path/to/tomcat/webapps/
   cd /path/to/tomcat/bin
   ./startup.sh
   ```

3. 配置Nginx代理：
   ```nginx
   server {
       listen 80;
       server_name scholarship.example.com;
       
       location / {
           proxy_pass http://localhost:8080/scholarship;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       }
       
       location /static/ {
           alias /path/to/tomcat/webapps/scholarship/static/;
           expires 30d;
       }
   }
   ```

### 9.3 环境要求

- **JDK版本**：JDK 17或更高版本
- **Tomcat版本**：Tomcat 10.0或更高版本
- **MySQL版本**：MySQL 8.0或更高版本
- **Nginx版本**：Nginx 1.20或更高版本
- **操作系统**：Linux (CentOS 7/8或Ubuntu 20.04/22.04)或Windows Server 2019/2022

## 10. 测试策略

### 10.1 测试类型

1. **单元测试**：测试各个类和方法的功能正确性
2. **集成测试**：测试模块间的交互是否正常
3. **系统测试**：测试整个系统的功能和性能
4. **压力测试**：测试系统在高并发情况下的表现
5. **安全测试**：测试系统的安全性和漏洞

### 10.2 测试工具

- **JUnit 5**：用于单元测试
- **MockMvc**：用于控制器测试
- **Postman**：用于API测试
- **JMeter**：用于性能测试
- **SonarQube**：用于代码质量检测

### 10.3 测试用例示例

#### 10.3.1 用户登录测试

| 测试编号 | 测试用例描述 | 输入数据 | 预期结果 | 实际结果 | 测试状态 |
|---------|------------|---------|---------|---------|--------|
| T001    | 正常登录    | 用户名：admin<br>密码：123456 | 登录成功，跳转到首页 |  | 待测试 |
| T002    | 用户名不存在 | 用户名：nonexist<br>密码：123456 | 提示"用户不存在" |  | 待测试 |
| T003    | 密码错误    | 用户名：admin<br>密码：wrong | 提示"密码错误" |  | 待测试 |
| T004    | 用户名或密码为空 | 用户名：<br>密码： | 提示"用户名或密码不能为空" |  | 待测试 |

#### 10.3.2 学生信息管理测试

| 测试编号 | 测试用例描述 | 输入数据 | 预期结果 | 实际结果 | 测试状态 |
|---------|------------|---------|---------|---------|--------|
| T011    | 添加学生信息 | 学号：20230001<br>姓名：张三<br>性别：男 | 添加成功，返回列表页 |  | 待测试 |
| T012    | 修改学生信息 | 学号：20230001<br>姓名：李四 | 修改成功，信息更新 |  | 待测试 |
| T013    | 删除学生信息 | 学号：20230001 | 删除成功，从列表中移除 |  | 待测试 |
| T014    | 查询学生信息 | 搜索关键词：张 | 显示所有姓名包含"张"的学生 |  | 待测试 |

## 11. 总结与展望

### 11.1 项目总结

本详细设计文档针对高校奖学金管理系统进行了全面的技术设计，包括项目结构、详细类设计、数据库设计、页面设计、接口设计等方面。系统基于Spring Boot 3.x技术栈，采用前后端不分离架构，实现了学生信息管理、奖学金评定管理和公示管理三大核心功能模块。

### 11.2 未来展望

1. **功能扩展**：
   - 添加数据可视化统计功能
   - 集成短信通知功能
   - 增加移动端适配
   - 添加批量导入导出功能

2. **性能优化**：
   - 引入缓存机制提高查询性能
   - 优化数据库查询语句
   - 实现分布式部署支持高并发

3. **安全增强**：
   - 增加双因素认证
   - 实现数据脱敏
   - 添加操作日志审计功能

通过本系统的实施，将有效提高高校奖学金管理的效率和透明度，为学校、教师和学生提供便捷的奖学金申请、评审和公示服务。